<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>TclActor</title>
</head>
<body>
<h1>TclActor</h1>

<ul>
    <li><a href="#Overview">Overview</a>
    <li><a href="#Commands">Standard Commands</a>
    <ul>
        <li><a href="#connDev">connDev <i>[dev1 [dev2 [...]]]</i></a>
        <li><a href="#disconnDev">disconnDev <i>[dev1 [dev2 [...]]]</i></a>
        <li><a href="#help">help</a>
        <li><a href="#exit">exit</a>
        <li><a href="#ping">ping</a>
        <li><a href="#status">status</a>
        <p>
        <li><a href="#debugMsgs">debugMsgs on/off</a>
        <li><a href="#debugRefCounts">debugRefCounts</a>
        <li><a href="#debugWing">debugWing</a>
    </ul>
    <li><a href="#Keywords">Standard Keywords</a>
    <ul>
        <li><a href="#devConnState"><i>dev</i>ConnState=<i>state, reason</i></a>
        <li><a href="#NumUsers">NumUsers=<i>int</i></a>
        <li><a href="#RefCount">RefCount=<i>refcount, object</i></a>
        <li><a href="#Superseded">Superseded</a>
        <li><a href="#Timeout">Timeout</a>
        <li><a href="#UnknownCommand">UnknownCommand=<i>cmdVerb</i></a>
        <li><a href="#UserInfo">UserInfo=<i>userID1, addr1, userID2, addr2, ...</i></a>
        <li><a href="#Version">Version=<i>vers</i></a>
        <li><a href="#YourUserID">YourUserID=<i>int</i></a>
    </ul>
    <li><a href="#VersionHistory">Version History</a>
</ul>

<h2><a name="Overview">Overview</a></h2>

<p>TclActor is core code for writing an actor: an instrument control computer (ICC) or hub-based script that does something useful. This manual describes the standard commands and keywords that any actor based on TclActor will support.

<p>See <a href="TclActorInternals.html">TclActor Internals</a> for information about writing code based on TclActor.

<h2><a name="Commands">Standard Commands</a></h2>

<p>All actors based on TclActor typically support the following standard commands (plus additional device-specific commands documented in that actor's manual). Commands are not case-sensitive.

<h3><a name="connDev">connDev <i>[dev1 [dev2 [...]]]</i></a></h3>

<p>Connect one or more devices (if not already connected). The default is to connect all devices that are not already connected.

<h3><a name="disconnDev">disconnDev <i>[dev1 [dev2 [...]]]</i></a></h3>

<p>Disconnect one or more devices (if not already disconnected). The default is to disconnect all devices that are not already disconnected.

<h3><a name="help">help</a></h3>

<p>Print a brief description of each command.

<h3><a name="exit">exit</a></h3>

<p>Log yourself out.

<h3><a name="ping">ping</a></h3>

<p>Return a short message to indicate that the controller is alive.

<h3><a name="status">status</a></h3>

<p>Print current status, including user information, the connection state of any devices that are not connected and any additional information that is specific to the actor.

<h3><a name="debugMsgs">debugMsgs</a> on/off</h3>

<p>Turn debugging messages on or off (for all users).

<h3><a name="debugRefCounts">debugRefCounts</a></h3>

<p>Display the reference count for each object (in descending reference count) using keyword <a href="#RefCount">RefCount</a>.

<h3><a name="debugWing">debugWing</a></h3>

<p>Enable debugging via WingIDE (simply imports wingdbstubs).

<h2><a name="Keywords"></a>Standard Keywords</h2>

<p>Keyword data is output whenever the state of the actor changes. All actors based on TclActor output the following standard keywords (in addition to device-specific keywords described in the manual for that actor).

<p>Notes:
<ul>
    <li><i>Dev</i> is a placeholder for a device name
    <li>Numeric values (even integers) will be "NaN" if unknown
    <li>When you first connect you are shown current status, including YourUserID.
</ul>

<h3><a name="devConnState"></a><i>dev</i>ConnState=<i>state, reason</i></h3>

<p>State of connection to the dev hardware controller. <i>State</i> is one of Connecting, Authorizing, Connected, Disconnecting, Failing, Disconnected or Failed (the states of an RO.Comm.TCPConnection object). <i>Reason</i> is the reason it got to this state ("" if no reason specified).

<h3><a name="NumUsers"></a>NumUsers=<i>int</i></h3>

<p>The number of users presently connected (a single integer)

<h3><a name="RefCount">RefCount=<i>refcount, object</i></a></h3>

<p>The reference count for an object.

<h3><a name="Superseded"></a>Superseded</h3>

<p>The command was superseded by some other command.

<h3><a name="Timeout"></a>Timeout</h3>

<p>The command timed out.

<h3><a name="UnknownCommand">UnknownCommand=<i>cmdVerb</i></a></h3>

<p>The command verb (the first word of your command string) is not supported by this actor.

<h3><a name="UserInfo"></a>UserInfo=<i>userID1, addr1, userID2, addr2, ...</i></h3>

<p>An variable-length array containing two entries for each user who is presently connected: userID and the IP address. The user ID is an integer and the address is a string. The userIDs will appear in sorted order but are not necessarily contiguous.

<h3><a name="Version">Version=<i>vers</i></a></h3>

<p>The version number (as a string) of the actor.

<h3><a name="YourUserID"></a>YourUserID=<i>int</i></h3>

<p>Your own userID.

<h2><a name="VersionHistory">Version History</a></h2>

<h3>1.0rc1 2008-07-09</h3>

<ul>
    <li>Minor cleanups prompted by pychecker.
</ul>

<h3>1.0b3 2008-02-01</h3>

<ul>
    <li>Added ping command
</ul>

<h3>1.0b2 2008-01-30</h3>

<ul>
    <li>Removed a diagnostic print statement.
    <li>Removed an unused variable (found by pychecker).
</ul>

<h3>1.0b1 2008-01-25</h3>

<p>The first beta release.

</body>
</html>
